# Next.js React MDX Blog Project Rules

## Project Overview
- **Architecture**: Next.js 15.3.2 with App Router, MDX 3.1.0, React 19.0.0
- **Content Structure**: Blog posts in `/content/posts/{slug}/content.mdx`
- **Custom Components**: Global in `/components/mdx/` and per-post in `/content/posts/{slug}/components/`
- **Metadata**: Centrally managed in `/content/metadata.ts`
- **Features**: Code highlighting, charts, Mermaid diagrams, Framer Motion animations

## Key Files
- `/app/blog/[slug]/page.tsx` - Dynamic routes for blog posts
- `/app/blog/[slug]/MDXRenderer.tsx` - Client-side MDX rendering
- `/lib/mdx.ts` - Core content fetching functions
- `/lib/mdx-loader.ts` - Custom component loading
- `/content/metadata.ts` - Blog post metadata storage

## Development Guidelines

### Responsive Design
- Use Tailwind's responsive prefixes (sm:, md:, lg:) for layout changes
- Charts: 14px minimum font size, optimize data for mobile, use `sm:` for desktop styles
- Apply `-ml-2 sm:ml-0` for proper mobile chart alignment
- Avoid fixed widths that cause horizontal scrolling
- Test all components on multiple device sizes

### Component Structure
- Place components in `/components` with PascalCase naming
- Group related components in subdirectories
- Keep components small and focused
- Use descriptive names; prefix utilities with `with`

### Code Style
- Use ES6+ and functional components with hooks
- Define prop types for all components
- Use TypeScript for new components
- Use Tailwind CSS primarily; CSS modules for complex styles
- Follow BEM for custom CSS classes

### Performance
- Use Next.js `Image` component with specified dimensions
- Prefer WebP/AVIF formats
- Implement lazy loading for below-the-fold content
- Use dynamic imports for heavy components
- Consider `next/dynamic` for component-level code splitting
- Performance budget: 200KB bundle (gzipped), LCP < 2.5s, TTI < 5s on 3G

### MDX Implementation
- Maintain separation between content and metadata
- Support both global and local components
- Process MDX client-side with next-mdx-remote
- Use proper error handling in MDX rendering
- Test MDX content with custom components before deployment

### Accessibility
- Use semantic HTML elements
- Ensure proper heading hierarchy (h1 > h2 > h3)
- Add alt text to all images
- Include ARIA labels where necessary
- Ensure keyboard accessibility
- Implement visible focus states
- Test tab order and navigation

### Documentation
- Document props with TypeScript interfaces
- Include usage examples in component files
- Keep README.md updated
- Document known limitations

### Git Workflow
- Use feature branches (`feature/feature-name`)
- Use bugfix branches (`bugfix/issue-description`)
- Write conventional commit messages
- Reference issue numbers when applicable

### Testing
- Write tests for utility functions
- Test component rendering and interactions
- Test critical user flows
- Include mobile and desktop test cases

### Security
- Keep dependencies updated
- Use environment variables for sensitive information
- Sanitize user inputs

### Browser Support
- Support latest 2 versions of major browsers
- Ensure graceful degradation for older browsers
