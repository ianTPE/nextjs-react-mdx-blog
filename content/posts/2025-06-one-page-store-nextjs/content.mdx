## å‰è¨€

åœ¨ 2025 å¹´çš„ç¶²é é–‹ç™¼é ˜åŸŸä¸­ï¼Œæ‰“é€ ä¸€å€‹é«˜æ•ˆèƒ½ã€ç¾è§€ä¸”åŠŸèƒ½å®Œæ•´çš„é›»å•†ç¶²ç«™å·²ç¶“è®Šå¾—æ¯”ä»¥å¾€æ›´åŠ é‡è¦ã€‚éš¨è‘—æŠ€è¡“çš„å¿«é€Ÿç™¼å±•ï¼Œé–‹ç™¼è€…ç¾åœ¨æ“æœ‰äº†æ›´å¼·å¤§çš„å·¥å…·å’Œæ¡†æ¶ä¾†å»ºç«‹å‡ºè‰²çš„ç·šä¸Šå•†åº—ã€‚æœ¬æ–‡å°‡æ·±å…¥æ¢è¨å¦‚ä½•ä½¿ç”¨ Next.js 14/15ã€React 19ã€MDXã€Tailwind CSSã€Shadcn/UI å’Œ TypeScript é€™å¥—ç¾ä»£åŒ–æŠ€è¡“å †æ£§ï¼Œå¾é›¶é–‹å§‹æ‰“é€ ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„ä¸€é å¼é›»å•†ç¶²ç«™ã€‚

### ç‚ºä»€éº¼é¸æ“‡ä¸€é å¼å•†åº—ï¼Ÿ

ä¸€é å¼å•†åº—ï¼ˆOne-Page Storeï¼‰æ˜¯ä¸€ç¨®å°‡æ‰€æœ‰ä¸»è¦åŠŸèƒ½é›†ä¸­åœ¨å–®ä¸€é é¢çš„é›»å•†è¨­è¨ˆæ¨¡å¼ã€‚é€™ç¨®è¨­è¨ˆæ–¹å¼èƒ½å¤ æä¾›æµæš¢çš„ä½¿ç”¨è€…é«”é©—ï¼Œæ¸›å°‘é é¢è¼‰å…¥æ™‚é–“ï¼Œä¸¦æé«˜è½‰æ›ç‡ã€‚å°æ–¼ç”¢å“æ•¸é‡ç›¸å°è¼ƒå°‘çš„å“ç‰Œæˆ–æƒ³è¦å¿«é€Ÿæ¸¬è©¦å¸‚å ´åæ‡‰çš„æ–°å‰µå…¬å¸ä¾†èªªï¼Œä¸€é å¼å•†åº—æ˜¯ä¸€å€‹ç†æƒ³çš„é¸æ“‡ã€‚

## æŠ€è¡“å †æ£§æ·±åº¦è§£æ

### 1. Next.js 15 - å¼·å¤§çš„ React æ¡†æ¶

Next.js æ˜¯ç”± Vercel é–‹ç™¼çš„å…¨ç«¯ React æ¡†æ¶ï¼Œæä¾›äº†æª”æ¡ˆå¼è·¯ç”±ã€å‹•æ…‹è·¯ç”±å’Œæ¢ä»¶æ¸²æŸ“ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚æœ€æ–°ç‰ˆæœ¬çš„ Next.js 15 å¸¶ä¾†äº†è¨±å¤šé‡è¦çš„æ”¹é€²ï¼š

- **App Router**ï¼šæä¾›æ›´éˆæ´»çš„è·¯ç”±ç³»çµ±å’Œä½ˆå±€ç®¡ç†
- **Server Components**ï¼šé è¨­ä½¿ç”¨ä¼ºæœå™¨å…ƒä»¶ï¼Œæå‡æ•ˆèƒ½å’Œ SEO
- **Turbopack**ï¼šæ›´å¿«çš„é–‹ç™¼ç’°å¢ƒå»ºç½®é€Ÿåº¦
- **å…§å»ºåœ–ç‰‡å„ªåŒ–**ï¼šè‡ªå‹•å„ªåŒ–åœ–ç‰‡è¼‰å…¥å’Œé¡¯ç¤º

### 2. React 19 - ç¾ä»£åŒ–çš„ UI å‡½å¼åº«

React 19 ä½œç‚ºæœ€æ–°ç‰ˆæœ¬ï¼Œå¸¶ä¾†äº†è¨±å¤šæ•ˆèƒ½å„ªåŒ–å’Œé–‹ç™¼é«”é©—çš„æ”¹é€²ï¼š

- **ä¸¦è¡Œæ¸²æŸ“**ï¼šæå‡å¤§å‹æ‡‰ç”¨çš„æ¸²æŸ“æ•ˆèƒ½
- **è‡ªå‹•æ‰¹æ¬¡æ›´æ–°**ï¼šæ¸›å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
- **æ”¹é€²çš„éŒ¯èª¤é‚Šç•Œ**ï¼šæ›´å¥½çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### 3. MDX - å¼·å¤§çš„å…§å®¹ç®¡ç†è§£æ±ºæ–¹æ¡ˆ

MDX æ˜¯ Markdown çš„æ“´å±•ï¼Œå…è¨±ä½ åœ¨ Markdown æª”æ¡ˆä¸­ç›´æ¥æ’°å¯« JSXã€‚é€™å°æ–¼é›»å•†ç¶²ç«™ä¾†èªªç‰¹åˆ¥æœ‰ç”¨ï¼Œå› ç‚ºï¼š

- **è±å¯Œçš„ç”¢å“æè¿°**ï¼šå¯ä»¥åœ¨ç”¢å“æè¿°ä¸­åµŒå…¥äº’å‹•å¼å…ƒä»¶
- **å‹•æ…‹å…§å®¹**ï¼šè¼•é¬†æ•´åˆåœ–è¡¨ã€å‹•ç•«å’Œå…¶ä»– React å…ƒä»¶
- **æ˜“æ–¼ç¶­è­·**ï¼šå…§å®¹èˆ‡ç¨‹å¼ç¢¼åˆ†é›¢ï¼Œä¾¿æ–¼éæŠ€è¡“äººå“¡ç·¨è¼¯

### 4. Tailwind CSS - å¯¦ç”¨å„ªå…ˆçš„ CSS æ¡†æ¶

Tailwind CSS æä¾›äº†ä¸€å¥—å®Œæ•´çš„å¯¦ç”¨é¡åˆ¥ç³»çµ±ï¼Œè®“ä½ èƒ½å¤ å¿«é€Ÿå»ºç«‹ç¾è§€çš„ä»‹é¢ï¼š

- **å¿«é€Ÿé–‹ç™¼**ï¼šç›´æ¥åœ¨ HTML ä¸­ä½¿ç”¨é å®šç¾©çš„é¡åˆ¥
- **ä¸€è‡´æ€§è¨­è¨ˆ**ï¼šç¢ºä¿æ•´å€‹ç¶²ç«™çš„è¦–è¦ºä¸€è‡´æ€§
- **é«˜åº¦å¯è‡ªè¨‚**ï¼šå¯ä»¥æ ¹æ“šå“ç‰Œéœ€æ±‚èª¿æ•´è¨­è¨ˆç³»çµ±

### 5. Shadcn/UI - ç¾ä»£åŒ–çš„å…ƒä»¶åº«

Shadcn/UI ä¸æ˜¯å‚³çµ±çš„å…ƒä»¶åº«ï¼Œè€Œæ˜¯ä¸€å€‹å¯ä»¥ç›´æ¥è¤‡è£½åˆ°å°ˆæ¡ˆä¸­çš„å…ƒä»¶é›†åˆã€‚å®ƒçš„ç‰¹é»åŒ…æ‹¬ï¼š

- **å®Œå…¨å¯è‡ªè¨‚**ï¼šæ¯å€‹å…ƒä»¶çš„åŸå§‹ç¢¼éƒ½åœ¨ä½ çš„å°ˆæ¡ˆä¸­
- **ç„¡éšœç¤™è¨­è¨ˆ**ï¼šæ‰€æœ‰å…ƒä»¶éƒ½éµå¾ª WCAG æ¨™æº–
- **èˆ‡ Tailwind å®Œç¾æ•´åˆ**ï¼šä½¿ç”¨ Tailwind CSS é€²è¡Œæ¨£å¼è¨­è¨ˆ

### 6. TypeScript - é¡å‹å®‰å…¨çš„ JavaScript

TypeScript ç‚º JavaScript æ·»åŠ äº†éœæ…‹é¡å‹æª¢æŸ¥ï¼Œæä¾›ï¼š

- **æ›´å°‘çš„åŸ·è¡Œæ™‚éŒ¯èª¤**ï¼šåœ¨ç·¨è­¯æ™‚æœŸå°±èƒ½ç™¼ç¾å¤§éƒ¨åˆ†éŒ¯èª¤
- **æ›´å¥½çš„é–‹ç™¼é«”é©—**ï¼šæ™ºæ…§å‹ç¨‹å¼ç¢¼æç¤ºå’Œè‡ªå‹•å®Œæˆ
- **æ›´å®¹æ˜“é‡æ§‹**ï¼šé¡å‹ç³»çµ±è®“å¤§è¦æ¨¡é‡æ§‹è®Šå¾—æ›´å®‰å…¨

## è©³ç´°å¯¦ä½œæ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šå°ˆæ¡ˆåˆå§‹åŒ–èˆ‡ç’°å¢ƒè¨­ç½®

é¦–å…ˆï¼Œæˆ‘å€‘éœ€è¦å»ºç«‹ä¸€å€‹æ–°çš„ Next.js å°ˆæ¡ˆä¸¦è¨­ç½®æ‰€æœ‰å¿…è¦çš„ä¾è³´é …ï¼š

```bash
# ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ create-next-app å»ºç«‹å°ˆæ¡ˆ
npx create-next-app@latest my-store --typescript --tailwind --eslint --app --src-dir

# é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd my-store

# å®‰è£é¡å¤–çš„ä¾è³´é …
npm install @next/mdx @mdx-js/loader @mdx-js/react gray-matter reading-time
npm install zustand @tanstack/react-query
npm install framer-motion lucide-react
npm install @radix-ui/react-slot class-variance-authority clsx tailwind-merge
```

### æ­¥é©Ÿ 2ï¼šè¨­ç½® Shadcn/UI

Shadcn/UI çš„è¨­ç½®éœ€è¦ç‰¹åˆ¥æ³¨æ„ï¼Œå› ç‚ºå®ƒæœƒç›´æ¥å½±éŸ¿æ•´å€‹å°ˆæ¡ˆçš„å…ƒä»¶çµæ§‹ï¼š

```bash
# åˆå§‹åŒ– Shadcn/UI
npx shadcn-ui@latest init
```

åœ¨åˆå§‹åŒ–éç¨‹ä¸­ï¼Œé¸æ“‡ä»¥ä¸‹é¸é …ï¼š
- TypeScriptï¼šYes
- æ¨£å¼ï¼šDefault
- åŸºç¤é¡è‰²ï¼šSlateï¼ˆæˆ–æ ¹æ“šå“ç‰Œé¸æ“‡ï¼‰
- CSS è®Šæ•¸ï¼šYes

æ¥è‘—å®‰è£æˆ‘å€‘éœ€è¦çš„å…ƒä»¶ï¼š

```bash
# å®‰è£é›»å•†ç¶²ç«™å¸¸ç”¨çš„å…ƒä»¶
npx shadcn-ui@latest add button card dialog sheet badge
npx shadcn-ui@latest add input label textarea select
npx shadcn-ui@latest add separator skeleton toast
npx shadcn-ui@latest add dropdown-menu navigation-menu
```

### æ­¥é©Ÿ 3ï¼šé…ç½® MDX æ”¯æ´

MDX çš„é…ç½®å°æ–¼ç®¡ç†ç”¢å“å…§å®¹è‡³é—œé‡è¦ã€‚å»ºç«‹ `next.config.mjs`ï¼š

```javascript
import createMDX from '@next/mdx'
import remarkGfm from 'remark-gfm'
import rehypePrism from 'rehype-prism-plus'

const withMDX = createMDX({
  options: {
    remarkPlugins: [remarkGfm],
    rehypePlugins: [rehypePrism],
  },
})

/** @type {import('next').NextConfig} */
const nextConfig = {
  pageExtensions: ['ts', 'tsx', 'mdx'],
  images: {
    domains: ['images.unsplash.com', 'cdn.shopify.com'],
  },
  experimental: {
    mdxRs: true,
  },
}

export default withMDX(nextConfig)
```

å»ºç«‹ `mdx-components.tsx` ä¾†å®šç¾©å…¨åŸŸ MDX å…ƒä»¶ï¼š

```typescript
import type { MDXComponents } from 'mdx/types'
import Image from 'next/image'
import { Button } from '@/components/ui/button'
import { Card } from '@/components/ui/card'

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    ...components,
    h1: ({ children }) => (
      <h1 className="text-4xl font-bold tracking-tight mb-4">{children}</h1>
    ),
    h2: ({ children }) => (
      <h2 className="text-3xl font-semibold mb-3">{children}</h2>
    ),
    p: ({ children }) => (
      <p className="text-muted-foreground leading-7 mb-4">{children}</p>
    ),
    Image,
    Button,
    Card,
  }
}
```

### æ­¥é©Ÿ 4ï¼šå»ºç«‹å°ˆæ¡ˆçµæ§‹

ä¸€å€‹çµ„ç¹”è‰¯å¥½çš„å°ˆæ¡ˆçµæ§‹å°æ–¼ç¶­è­·å’Œæ“´å±•è‡³é—œé‡è¦ï¼š

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ globals.css
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/           # Shadcn/UI å…ƒä»¶
â”‚   â”œâ”€â”€ store/        # å•†åº—ç‰¹å®šå…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ ProductCard.tsx
â”‚   â”‚   â”œâ”€â”€ ProductGrid.tsx
â”‚   â”‚   â”œâ”€â”€ CartSheet.tsx
â”‚   â”‚   â”œâ”€â”€ CheckoutDialog.tsx
â”‚   â”‚   â””â”€â”€ SearchBar.tsx
â”‚   â””â”€â”€ layout/       # ä½ˆå±€å…ƒä»¶
â”‚       â”œâ”€â”€ Header.tsx
â”‚       â”œâ”€â”€ Footer.tsx
â”‚       â””â”€â”€ Hero.tsx
â”œâ”€â”€ content/
â”‚   â””â”€â”€ products/     # MDX ç”¢å“æª”æ¡ˆ
â”‚       â”œâ”€â”€ product-1.mdx
â”‚       â”œâ”€â”€ product-2.mdx
â”‚       â””â”€â”€ product-3.mdx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ store.ts      # Zustand ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ api.ts        # API å‡½æ•¸
â”‚   â””â”€â”€ utils.ts      # å·¥å…·å‡½æ•¸
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts      # TypeScript é¡å‹å®šç¾©
â””â”€â”€ hooks/            # è‡ªè¨‚ Hooks
    â”œâ”€â”€ useCart.ts
    â””â”€â”€ useProducts.ts
```

### æ­¥é©Ÿ 5ï¼šå®šç¾©è³‡æ–™é¡å‹

å»ºç«‹ `src/types/index.ts` ä¾†å®šç¾©å°ˆæ¡ˆä¸­ä½¿ç”¨çš„æ‰€æœ‰é¡å‹ï¼š

```typescript
export interface Product {
  id: string
  name: string
  slug: string
  price: number
  salePrice?: number
  description: string
  shortDescription: string
  images: string[]
  category: string
  tags: string[]
  inStock: boolean
  quantity: number
  variants?: ProductVariant[]
  features: string[]
  specifications: Record<string, string>
  reviews: Review[]
  rating: number
  createdAt: Date
  updatedAt: Date
}

export interface ProductVariant {
  id: string
  name: string
  price: number
  image?: string
  inStock: boolean
  attributes: Record<string, string>
}

export interface Review {
  id: string
  userId: string
  userName: string
  rating: number
  comment: string
  createdAt: Date
  helpful: number
}

export interface CartItem {
  productId: string
  variantId?: string
  quantity: number
  product: Product
  variant?: ProductVariant
}

export interface ShippingInfo {
  fullName: string
  email: string
  phone: string
  address: string
  city: string
  state: string
  zipCode: string
  country: string
}

export interface Order {
  id: string
  items: CartItem[]
  shipping: ShippingInfo
  subtotal: number
  tax: number
  shipping: number
  total: number
  status: 'pending' | 'processing' | 'shipped' | 'delivered' | 'cancelled'
  createdAt: Date
}
```

### æ­¥é©Ÿ 6ï¼šå¯¦ä½œç‹€æ…‹ç®¡ç†

ä½¿ç”¨ Zustand å»ºç«‹å…¨åŸŸç‹€æ…‹ç®¡ç†ï¼Œå»ºç«‹ `src/lib/store.ts`ï¼š

```typescript
import { create } from 'zustand'
import { persist, createJSONStorage } from 'zustand/middleware'
import { CartItem, Product, ProductVariant } from '@/types'

interface CartStore {
  items: CartItem[]
  isOpen: boolean
  
  // è³¼ç‰©è»Šæ“ä½œ
  addItem: (product: Product, variant?: ProductVariant, quantity?: number) => void
  removeItem: (productId: string, variantId?: string) => void
  updateQuantity: (productId: string, quantity: number, variantId?: string) => void
  clearCart: () => void
  
  // UI æ“ä½œ
  openCart: () => void
  closeCart: () => void
  
  // è¨ˆç®—å±¬æ€§
  getTotalItems: () => number
  getSubtotal: () => number
  getTax: (rate?: number) => number
  getTotal: (taxRate?: number) => number
}

export const useCart = create<CartStore>()(
  persist(
    (set, get) => ({
      items: [],
      isOpen: false,
      
      addItem: (product, variant, quantity = 1) => {
        set((state) => {
          const existingItem = state.items.find(
            item => item.productId === product.id && 
                   item.variantId === variant?.id
          )
          
          if (existingItem) {
            return {
              items: state.items.map(item =>
                item.productId === product.id && item.variantId === variant?.id
                  ? { ...item, quantity: item.quantity + quantity }
                  : item
              )
            }
          }
          
          return {
            items: [...state.items, {
              productId: product.id,
              variantId: variant?.id,
              quantity,
              product,
              variant
            }]
          }
        })
      },
      
      removeItem: (productId, variantId) => {
        set((state) => ({
          items: state.items.filter(
            item => !(item.productId === productId && item.variantId === variantId)
          )
        }))
      },
      
      updateQuantity: (productId, quantity, variantId) => {
        if (quantity <= 0) {
          get().removeItem(productId, variantId)
          return
        }
        
        set((state) => ({
          items: state.items.map(item =>
            item.productId === productId && item.variantId === variantId
              ? { ...item, quantity }
              : item
          )
        }))
      },
      
      clearCart: () => set({ items: [] }),
      openCart: () => set({ isOpen: true }),
      closeCart: () => set({ isOpen: false }),
      
      getTotalItems: () => {
        return get().items.reduce((total, item) => total + item.quantity, 0)
      },
      
      getSubtotal: () => {
        return get().items.reduce((total, item) => {
          const price = item.variant?.price ?? item.product.salePrice ?? item.product.price
          return total + (price * item.quantity)
        }, 0)
      },
      
      getTax: (rate = 0.08) => {
        return get().getSubtotal() * rate
      },
      
      getTotal: (taxRate = 0.08) => {
        const subtotal = get().getSubtotal()
        return subtotal + get().getTax(taxRate)
      }
    }),
    {
      name: 'shopping-cart',
      storage: createJSONStorage(() => localStorage),
    }
  )
)
```

### æ­¥é©Ÿ 7ï¼šå»ºç«‹æ ¸å¿ƒå…ƒä»¶

#### ç”¢å“å¡ç‰‡å…ƒä»¶

å»ºç«‹ `src/components/store/ProductCard.tsx`ï¼š

```typescript
'use client'

import Image from 'next/image'
import { useState } from 'react'
import { motion } from 'framer-motion'
import { ShoppingCart, Heart, Eye } from 'lucide-react'
import { Card, CardContent, CardFooter } from '@/components/ui/card'
import { Button } from '@/components/ui/button'
import { Badge } from '@/components/ui/badge'
import { useCart } from '@/lib/store'
import { Product } from '@/types'
import { cn } from '@/lib/utils'

interface ProductCardProps {
  product: Product
  onQuickView?: (product: Product) => void
}

export function ProductCard({ product, onQuickView }: ProductCardProps) {
  const [isHovered, setIsHovered] = useState(false)
  const [isFavorite, setIsFavorite] = useState(false)
  const { addItem, openCart } = useCart()
  
  const discount = product.salePrice 
    ? Math.round(((product.price - product.salePrice) / product.price) * 100)
    : 0
  
  const handleAddToCart = () => {
    addItem(product)
    openCart()
  }
  
  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.4 }}
      whileHover={{ y: -5 }}
    >
      <Card 
        className="relative overflow-hidden group cursor-pointer"
        onMouseEnter={() => setIsHovered(true)}
        onMouseLeave={() => setIsHovered(false)}
      >
        {/* æŠ˜æ‰£æ¨™ç±¤ */}
        {discount > 0 && (
          <Badge className="absolute top-2 left-2 z-10" variant="destructive">
            -{discount}%
          </Badge>
        )}
        
        {/* æ”¶è—æŒ‰éˆ• */}
        <Button
          size="icon"
          variant="ghost"
          className="absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity"
          onClick={() => setIsFavorite(!isFavorite)}
        >
          <Heart className={cn("h-4 w-4", isFavorite && "fill-current text-red-500")} />
        </Button>
        
        {/* ç”¢å“åœ–ç‰‡ */}
        <div className="relative aspect-square overflow-hidden bg-gray-100">
          <Image
            src={product.images[0]}
            alt={product.name}
            fill
            className="object-cover transition-transform duration-300 group-hover:scale-110"
            sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
          />
          
          {/* å¿«é€Ÿé è¦½æŒ‰éˆ• */}
          {isHovered && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              className="absolute inset-0 bg-black/40 flex items-center justify-center"
            >
              <Button
                variant="secondary"
                onClick={() => onQuickView?.(product)}
                className="gap-2"
              >
                <Eye className="h-4 w-4" />
                å¿«é€Ÿé è¦½
              </Button>
            </motion.div>
          )}
        </div>
        
        <CardContent className="p-4">
          <h3 className="font-medium text-lg mb-1 line-clamp-1">{product.name}</h3>
          <p className="text-sm text-muted-foreground mb-2 line-clamp-2">
            {product.shortDescription}
          </p>
          
          <div className="flex items-center gap-2 mb-2">
            {product.salePrice ? (
              <>
                <span className="font-bold text-lg">${product.salePrice}</span>
                <span className="text-sm text-muted-foreground line-through">
                  ${product.price}
                </span>
              </>
            ) : (
              <span className="font-bold text-lg">${product.price}</span>
            )}
          </div>
          
          {/* è©•åˆ† */}
          <div className="flex items-center gap-1">
            {[...Array(5)].map((_, i) => (
              <svg
                key={i}
                className={cn(
                  "h-4 w-4",
                  i < Math.floor(product.rating) 
                    ? "text-yellow-400 fill-current" 
                    : "text-gray-300"
                )}
                viewBox="0 0 20 20"
              >
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
              </svg>
            ))}
            <span className="text-sm text-muted-foreground ml-1">
              ({product.reviews.length})
            </span>
          </div>
        </CardContent>
        
        <CardFooter className="p-4 pt-0">
          <Button 
            className="w-full" 
            onClick={handleAddToCart}
            disabled={!product.inStock}
          >
            <ShoppingCart className="mr-2 h-4 w-4" />
            {product.inStock ? 'åŠ å…¥è³¼ç‰©è»Š' : 'ç¼ºè²¨ä¸­'}
          </Button>
        </CardFooter>
      </Card>
    </motion.div>
  )
}
```

#### è³¼ç‰©è»Šå´é‚Šæ¬„å…ƒä»¶

å»ºç«‹ `src/components/store/CartSheet.tsx`ï¼š

```typescript
'use client'

import Image from 'next/image'
import { Sheet, SheetContent, SheetHeader, SheetTitle } from '@/components/ui/sheet'
import { Button } from '@/components/ui/button'
import { Separator } from '@/components/ui/separator'
import { Badge } from '@/components/ui/badge'
import { ScrollArea } from '@/components/ui/scroll-area'
import { Minus, Plus, Trash2, ShoppingBag } from 'lucide-react'
import { useCart } from '@/lib/store'
import { motion, AnimatePresence } from 'framer-motion'

export function CartSheet() {
  const { 
    items, 
    isOpen, 
    closeCart, 
    updateQuantity, 
    removeItem,
    getTotalItems,
    getSubtotal,
    getTax,
    getTotal 
  } = useCart()
  
  const subtotal = getSubtotal()
  const tax = getTax()
  const total = getTotal()
  
  return (
    <Sheet open={isOpen} onOpenChange={closeCart}>
      <SheetContent className="w-full sm:max-w-md">
        <SheetHeader>
          <SheetTitle className="flex items-center gap-2">
            <ShoppingBag className="h-5 w-5" />
            è³¼ç‰©è»Š ({getTotalItems()})
          </SheetTitle>
        </SheetHeader>
        
        {items.length === 0 ? (
          <div className="flex flex-col items-center justify-center h-[50vh] space-y-4">
            <ShoppingBag className="h-16 w-16 text-muted-foreground" />
            <p className="text-lg text-muted-foreground">æ‚¨çš„è³¼ç‰©è»Šæ˜¯ç©ºçš„</p>
            <Button onClick={closeCart}>ç¹¼çºŒè³¼ç‰©</Button>
          </div>
        ) : (
          <>
            <ScrollArea className="flex-1 mt-4 pr-4" style={{ height: 'calc(100vh - 280px)' }}>
              <AnimatePresence mode="popLayout">
                {items.map((item) => {
                  const price = item.variant?.price ?? item.product.salePrice ?? item.product.price
                  
                  return (
                    <motion.div
                      key={\`\${item.productId}-\${item.variantId}\`}
                      layout
                      initial={{ opacity: 0, x: -20 }}
                      animate={{ opacity: 1, x: 0 }}
                      exit={{ opacity: 0, x: 20 }}
                      className="flex gap-4 py-4 border-b"
                    >
                      <div className="relative h-24 w-24 rounded-md overflow-hidden bg-gray-100">
                        <Image
                          src={item.product.images[0]}
                          alt={item.product.name}
                          fill
                          className="object-cover"
                        />
                      </div>
                      
                      <div className="flex-1 space-y-2">
                        <h4 className="font-medium line-clamp-1">{item.product.name}</h4>
                        {item.variant && (
                          <p className="text-sm text-muted-foreground">
                            {item.variant.name}
                          </p>
                        )}
                        <div className="flex items-center justify-between">
                          <span className="font-medium">${price}</span>
                          
                          <div className="flex items-center gap-2">
                            <Button
                              size="icon"
                              variant="outline"
                              className="h-8 w-8"
                              onClick={() => updateQuantity(
                                item.productId, 
                                item.quantity - 1, 
                                item.variantId
                              )}
                            >
                              <Minus className="h-3 w-3" />
                            </Button>
                            
                            <span className="w-8 text-center">{item.quantity}</span>
                            
                            <Button
                              size="icon"
                              variant="outline"
                              className="h-8 w-8"
                              onClick={() => updateQuantity(
                                item.productId, 
                                item.quantity + 1, 
                                item.variantId
                              )}
                            >
                              <Plus className="h-3 w-3" />
                            </Button>
                            
                            <Button
                              size="icon"
                              variant="ghost"
                              className="h-8 w-8 text-destructive"
                              onClick={() => removeItem(item.productId, item.variantId)}
                            >
                              <Trash2 className="h-4 w-4" />
                            </Button>
                          </div>
                        </div>
                      </div>
                    </motion.div>
                  )
                })}
              </AnimatePresence>
            </ScrollArea>
            
            <div className="space-y-4 mt-6">
              <Separator />
              
              <div className="space-y-2">
                <div className="flex justify-between text-sm">
                  <span>å°è¨ˆ</span>
                  <span>${subtotal.toFixed(2)}</span>
                </div>
                <div className="flex justify-between text-sm">
                  <span>ç¨…é‡‘</span>
                  <span>${tax.toFixed(2)}</span>
                </div>
                <div className="flex justify-between text-sm">
                  <span>é‹è²»</span>
                  <Badge variant="secondary">å…é‹è²»</Badge>
                </div>
                <Separator />
                <div className="flex justify-between font-semibold text-lg">
                  <span>ç¸½è¨ˆ</span>
                  <span>${total.toFixed(2)}</span>
                </div>
              </div>
              
              <Button className="w-full" size="lg">
                å‰å¾€çµå¸³
              </Button>
              
              <Button variant="outline" className="w-full" onClick={closeCart}>
                ç¹¼çºŒè³¼ç‰©
              </Button>
            </div>
          </>
        )}
      </SheetContent>
    </Sheet>
  )
}
```

### æ­¥é©Ÿ 8ï¼šå»ºç«‹ MDX ç”¢å“å…§å®¹

MDX å…è¨±æˆ‘å€‘åœ¨ Markdown ä¸­åµŒå…¥ JSXï¼Œé€™å°æ–¼å‰µå»ºè±å¯Œçš„ç”¢å“æè¿°ç‰¹åˆ¥æœ‰ç”¨ã€‚å»ºç«‹ç”¢å“ MDX æª”æ¡ˆ `src/content/products/wireless-headphones.mdx`ï¼š

```mdx
---
id: "prod_001"
name: "WaveSound Pro ç„¡ç·šé™å™ªè€³æ©Ÿ"
slug: "wavesound-pro-headphones"
price: 299.99
salePrice: 249.99
category: "éŸ³éŸ¿è¨­å‚™"
tags: ["ç„¡ç·š", "é™å™ª", "é«˜éŸ³è³ª"]
inStock: true
quantity: 50
images:
  - "/images/headphones-1.jpg"
  - "/images/headphones-2.jpg"
  - "/images/headphones-3.jpg"
shortDescription: "é«”é©—å‰æ‰€æœªæœ‰çš„éŸ³è³ªï¼Œæ­è¼‰ä¸»å‹•é™å™ªæŠ€è¡“çš„é ‚ç´šç„¡ç·šè€³æ©Ÿ"
features:
  - "40mm å‹•æ…‹é©…å‹•å–®å…ƒ"
  - "ä¸»å‹•é™å™ªæŠ€è¡“ (ANC)"
  - "30 å°æ™‚é›»æ± çºŒèˆª"
  - "å¿«é€Ÿå……é›»åŠŸèƒ½"
  - "è—ç‰™ 5.0 é€£æ¥"
specifications:
  é©…å‹•å–®å…ƒ: "40mm å‹•æ…‹é©…å‹•"
  é »ç‡éŸ¿æ‡‰: "20Hz - 20kHz"
  é˜»æŠ—: "32Î©"
  éˆæ•åº¦: "105dB"
  é›»æ± å®¹é‡: "750mAh"
  å……é›»æ™‚é–“: "2å°æ™‚"
  é‡é‡: "250g"
---

import { ProductFeatures } from '@/components/store/ProductFeatures'
import { TechSpecs } from '@/components/store/TechSpecs'

## æ²‰æµ¸å¼éŸ³è³ªé«”é©—

WaveSound Pro ç„¡ç·šé™å™ªè€³æ©Ÿæ¡ç”¨å…ˆé€²çš„ **40mm å‹•æ…‹é©…å‹•å–®å…ƒ**ï¼Œæä¾›æ·±æ²‰çš„ä½éŸ³ã€æ¸…æ™°çš„ä¸­éŸ³å’Œæ˜äº®çš„é«˜éŸ³ã€‚ç„¡è«–æ˜¯è†è½éŸ³æ¨‚ã€è§€çœ‹é›»å½±é‚„æ˜¯é€²è¡Œè¦–è¨Šæœƒè­°ï¼Œéƒ½èƒ½äº«å—åˆ°éŒ„éŸ³å®¤ç´šåˆ¥çš„éŸ³è³ªã€‚

### ä¸»å‹•é™å™ªæŠ€è¡“

æ­è¼‰æœ€æ–°çš„ ANC ä¸»å‹•é™å™ªæŠ€è¡“ï¼Œèƒ½å¤ æœ‰æ•ˆæ¶ˆé™¤é«˜é” **95% çš„ç’°å¢ƒå™ªéŸ³**ã€‚ç„¡è«–æ‚¨èº«è™•ç¹å¿™çš„è¡—é“ã€åµé›œçš„å’–å•¡å»³é‚„æ˜¯é£›æ©Ÿä¸Šï¼Œéƒ½èƒ½äº«å—å±¬æ–¼è‡ªå·±çš„å¯§éœç©ºé–“ã€‚

<ProductFeatures features={[
  {
    icon: "ğŸµ",
    title: "Hi-Res é«˜è§£æéŸ³è³ª",
    description: "æ”¯æ´ LDAC ç·¨ç¢¼ï¼Œæä¾›æ¥è¿‘ç„¡æçš„éŸ³è³ªé«”é©—"
  },
  {
    icon: "ğŸ”‹",
    title: "è¶…é•·çºŒèˆª",
    description: "å–®æ¬¡å……é›»å¯é€£çºŒä½¿ç”¨ 30 å°æ™‚ï¼Œå¿«å…… 15 åˆ†é˜å³å¯ä½¿ç”¨ 5 å°æ™‚"
  },
  {
    icon: "ğŸ¤",
    title: "æ¸…æ™°é€šè©±",
    description: "6 å€‹éº¥å…‹é¢¨é™£åˆ—æ­é… AI é™å™ªç®—æ³•ï¼Œç¢ºä¿é€šè©±æ¸…æ™°"
  },
  {
    icon: "ğŸ“±",
    title: "å¤šè¨­å‚™é€£æ¥",
    description: "å¯åŒæ™‚é€£æ¥å…©å€‹è—ç‰™è¨­å‚™ï¼Œè¼•é¬†åˆ‡æ›"
  }
]} />

### èˆ’é©ä½©æˆ´è¨­è¨ˆ

æ¡ç”¨è¨˜æ†¶æµ·ç¶¿è€³å¢Šå’Œå¯èª¿ç¯€é ­å¸¶è¨­è¨ˆï¼Œå³ä½¿é•·æ™‚é–“ä½©æˆ´ä¹Ÿä¸æœƒæ„Ÿåˆ°ä¸é©ã€‚å¯æŠ˜ç–Šè¨­è¨ˆæ–¹ä¾¿æ”œå¸¶ï¼Œé™„è´ˆçš„ç¡¬æ®¼æ”¶ç´ç›’èƒ½å¤ å®Œç¾ä¿è­·æ‚¨çš„è€³æ©Ÿã€‚

### æ™ºæ…§åŠŸèƒ½

- **è‡ªé©æ‡‰é™å™ª**ï¼šæ ¹æ“šç’°å¢ƒå™ªéŸ³è‡ªå‹•èª¿æ•´é™å™ªå¼·åº¦
- **ç’°å¢ƒéŸ³æ¨¡å¼**ï¼šç„¡éœ€æ‘˜ä¸‹è€³æ©Ÿå³å¯è½åˆ°å‘¨åœè²éŸ³
- **è§¸æ§æ“ä½œ**ï¼šè¼•è§¸è€³ç½©å³å¯æ§åˆ¶éŸ³æ¨‚æ’­æ”¾å’Œæ¥è½é›»è©±
- **èªéŸ³åŠ©æ‰‹**ï¼šæ”¯æ´ Siriã€Google Assistant å’Œ Alexa

<TechSpecs specs={{
  "é©…å‹•å–®å…ƒ": "40mm å‹•æ…‹é©…å‹•",
  "é »ç‡éŸ¿æ‡‰": "20Hz - 20kHz",
  "é˜»æŠ—": "32Î©",
  "éˆæ•åº¦": "105dB",
  "é›»æ± å®¹é‡": "750mAh",
  "å……é›»æ™‚é–“": "2å°æ™‚",
  "é‡é‡": "250g",
  "è—ç‰™ç‰ˆæœ¬": "5.0",
  "æ”¯æ´ç·¨ç¢¼": "SBC, AAC, LDAC",
  "é™å™ªæ·±åº¦": "-35dB"
}} />

### åŒ…è£å…§å®¹

- WaveSound Pro ç„¡ç·šè€³æ©Ÿ Ã— 1
- USB-C å……é›»ç·š Ã— 1
- 3.5mm éŸ³æºç·š Ã— 1
- é£›æ©Ÿè½‰æ¥é ­ Ã— 1
- ç¡¬æ®¼æ”¶ç´ç›’ Ã— 1
- ä½¿ç”¨èªªæ˜æ›¸ Ã— 1
```

### æ­¥é©Ÿ 9ï¼šå¯¦ä½œç”¢å“è¼‰å…¥ç³»çµ±

å»ºç«‹ `src/lib/products.ts` ä¾†è™•ç† MDX ç”¢å“æª”æ¡ˆçš„è¼‰å…¥ï¼š

```typescript
import fs from 'fs'
import path from 'path'
import matter from 'gray-matter'
import { Product } from '@/types'

const productsDirectory = path.join(process.cwd(), 'src/content/products')

export async function getProductSlugs() {
  const files = fs.readdirSync(productsDirectory)
  return files.map(file => file.replace(/\.mdx$/, ''))
}

export async function getProductBySlug(slug: string): Promise<Product> {
  const fullPath = path.join(productsDirectory, \`\${slug}.mdx\`)
  const fileContents = fs.readFileSync(fullPath, 'utf8')
  const { data, content } = matter(fileContents)
  
  // è¨ˆç®—è©•åˆ†ï¼ˆç¤ºä¾‹ï¼šéš¨æ©Ÿç”Ÿæˆæˆ–å¾è©•è«–è¨ˆç®—ï¼‰
  const rating = data.reviews 
    ? data.reviews.reduce((acc: number, review: any) => acc + review.rating, 0) / data.reviews.length
    : 4.5
  
  return {
    ...data,
    content,
    rating,
    reviews: data.reviews || [],
    createdAt: new Date(data.createdAt || Date.now()),
    updatedAt: new Date(data.updatedAt || Date.now()),
  } as Product
}

export async function getAllProducts(): Promise<Product[]> {
  const slugs = await getProductSlugs()
  const products = await Promise.all(
    slugs.map(slug => getProductBySlug(slug))
  )
  
  return products.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())
}

export async function getProductsByCategory(category: string): Promise<Product[]> {
  const products = await getAllProducts()
  return products.filter(product => product.category === category)
}

export async function getFeaturedProducts(): Promise<Product[]> {
  const products = await getAllProducts()
  // é¸æ“‡æœ‰æŠ˜æ‰£æˆ–è©•åˆ†é«˜çš„ç”¢å“ä½œç‚ºç²¾é¸
  return products
    .filter(product => product.salePrice || product.rating >= 4.5)
    .slice(0, 6)
}

export async function searchProducts(query: string): Promise<Product[]> {
  const products = await getAllProducts()
  const lowercaseQuery = query.toLowerCase()
  
  return products.filter(product => 
    product.name.toLowerCase().includes(lowercaseQuery) ||
    product.description.toLowerCase().includes(lowercaseQuery) ||
    product.tags.some(tag => tag.toLowerCase().includes(lowercaseQuery))
  )
}
```

### æ­¥é©Ÿ 10ï¼šå»ºç«‹ä¸»é é¢

æ•´åˆæ‰€æœ‰å…ƒä»¶ï¼Œå»ºç«‹ `src/app/page.tsx`ï¼š

```typescript
import { Suspense } from 'react'
import { getAllProducts, getFeaturedProducts } from '@/lib/products'
import { Header } from '@/components/layout/Header'
import { Hero } from '@/components/layout/Hero'
import { ProductGrid } from '@/components/store/ProductGrid'
import { FeaturedProducts } from '@/components/store/FeaturedProducts'
import { Newsletter } from '@/components/layout/Newsletter'
import { Footer } from '@/components/layout/Footer'
import { CartSheet } from '@/components/store/CartSheet'
import { SearchCommand } from '@/components/store/SearchCommand'
import { ProductGridSkeleton } from '@/components/skeletons/ProductGridSkeleton'

export default async function HomePage() {
  const [products, featuredProducts] = await Promise.all([
    getAllProducts(),
    getFeaturedProducts()
  ])
  
  return (
    <>
      <Header />
      <main className="min-h-screen">
        {/* ä¸»æ©«å¹…å€åŸŸ */}
        <Hero />
        
        {/* ç²¾é¸ç”¢å“ */}
        <section className="container mx-auto px-4 py-12">
          <div className="text-center mb-8">
            <h2 className="text-3xl font-bold mb-2">ç²¾é¸å•†å“</h2>
            <p className="text-muted-foreground">æ¢ç´¢æˆ‘å€‘æœ€å—æ­¡è¿çš„ç”¢å“</p>
          </div>
          <FeaturedProducts products={featuredProducts} />
        </section>
        
        {/* æ‰€æœ‰ç”¢å“ */}
        <section className="container mx-auto px-4 py-12" id="products">
          <div className="text-center mb-8">
            <h2 className="text-3xl font-bold mb-2">æ‰€æœ‰å•†å“</h2>
            <p className="text-muted-foreground">ç€è¦½æˆ‘å€‘çš„å®Œæ•´ç”¢å“ç³»åˆ—</p>
          </div>
          
          <Suspense fallback={<ProductGridSkeleton />}>
            <ProductGrid products={products} />
          </Suspense>
        </section>
        
        {/* é›»å­å ±è¨‚é–± */}
        <Newsletter />
      </main>
      
      <Footer />
      
      {/* å…¨åŸŸå…ƒä»¶ */}
      <CartSheet />
      <SearchCommand products={products} />
    </>
  )
}
```

### æ­¥é©Ÿ 11ï¼šæ•ˆèƒ½å„ªåŒ–

#### 1. åœ–ç‰‡å„ªåŒ–

ä½¿ç”¨ Next.js çš„ Image å…ƒä»¶å’Œé©ç•¶çš„è¼‰å…¥ç­–ç•¥ï¼š

```typescript
// å»ºç«‹åœ–ç‰‡è¼‰å…¥å…ƒä»¶
import Image from 'next/image'
import { useState } from 'react'
import { cn } from '@/lib/utils'

interface OptimizedImageProps {
  src: string
  alt: string
  className?: string
  priority?: boolean
}

export function OptimizedImage({ src, alt, className, priority }: OptimizedImageProps) {
  const [isLoading, setIsLoading] = useState(true)
  
  return (
    <div className={cn("relative overflow-hidden bg-gray-100", className)}>
      <Image
        src={src}
        alt={alt}
        fill
        priority={priority}
        className={cn(
          "object-cover duration-700 ease-in-out",
          isLoading ? "scale-110 blur-2xl grayscale" : "scale-100 blur-0 grayscale-0"
        )}
        onLoadingComplete={() => setIsLoading(false)}
        sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
      />
    </div>
  )
}
```

#### 2. ç¨‹å¼ç¢¼åˆ†å‰²å’Œå»¶é²è¼‰å…¥

```typescript
// ä½¿ç”¨å‹•æ…‹å°å…¥é€²è¡Œç¨‹å¼ç¢¼åˆ†å‰²
import dynamic from 'next/dynamic'

// å»¶é²è¼‰å…¥å¤§å‹å…ƒä»¶
const ProductQuickView = dynamic(
  () => import('@/components/store/ProductQuickView'),
  { 
    loading: () => <ProductQuickViewSkeleton />,
    ssr: false 
  }
)

const ReviewSection = dynamic(
  () => import('@/components/store/ReviewSection'),
  { loading: () => <ReviewSectionSkeleton /> }
)
```

#### 3. è³‡æ–™é å–å’Œå¿«å–

ä½¿ç”¨ React Query é€²è¡Œè³‡æ–™ç®¡ç†ï¼š

```typescript
// src/hooks/useProducts.ts
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'
import { getAllProducts, searchProducts } from '@/lib/products'

export function useProducts() {
  return useQuery({
    queryKey: ['products'],
    queryFn: getAllProducts,
    staleTime: 5 * 60 * 1000, // 5 åˆ†é˜
    cacheTime: 10 * 60 * 1000, // 10 åˆ†é˜
  })
}

export function useProductSearch(query: string) {
  return useQuery({
    queryKey: ['products', 'search', query],
    queryFn: () => searchProducts(query),
    enabled: query.length > 2,
    staleTime: 2 * 60 * 1000,
  })
}

// é å–ç”¢å“è³‡æ–™
export function usePrefetchProducts() {
  const queryClient = useQueryClient()
  
  return () => {
    queryClient.prefetchQuery({
      queryKey: ['products'],
      queryFn: getAllProducts,
    })
  }
}
```

### æ­¥é©Ÿ 12ï¼šSEO å„ªåŒ–

å»ºç«‹ SEO å…ƒä»¶å’Œçµæ§‹åŒ–è³‡æ–™ï¼š

```typescript
// src/components/seo/ProductJsonLd.tsx
export function ProductJsonLd({ product }: { product: Product }) {
  const jsonLd = {
    '@context': 'https://schema.org',
    '@type': 'Product',
    name: product.name,
    description: product.description,
    image: product.images,
    offers: {
      '@type': 'Offer',
      price: product.salePrice || product.price,
      priceCurrency: 'TWD',
      availability: product.inStock 
        ? 'https://schema.org/InStock' 
        : 'https://schema.org/OutOfStock',
    },
    aggregateRating: {
      '@type': 'AggregateRating',
      ratingValue: product.rating,
      reviewCount: product.reviews.length,
    },
  }
  
  return (
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}
    />
  )
}
```

### æ­¥é©Ÿ 13ï¼šéƒ¨ç½²æº–å‚™

#### ç’°å¢ƒè®Šæ•¸è¨­ç½®

å»ºç«‹ `.env.local`ï¼š

```env
# API ç«¯é»
NEXT_PUBLIC_API_URL=https://api.yourstore.com

# ç¬¬ä¸‰æ–¹æœå‹™
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxx
STRIPE_SECRET_KEY=sk_test_xxx

# åˆ†æå·¥å…·
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
NEXT_PUBLIC_FACEBOOK_PIXEL_ID=xxxxxxxxxxxxx

# åœ–ç‰‡ CDN
NEXT_PUBLIC_IMAGE_CDN=https://cdn.yourstore.com
```

#### å»ºç½®å„ªåŒ–é…ç½®

æ›´æ–° `next.config.mjs`ï¼š

```javascript
const nextConfig = {
  // ... å…¶ä»–é…ç½®
  
  // ç”Ÿç”¢ç’°å¢ƒå„ªåŒ–
  swcMinify: true,
  compress: true,
  
  // åœ–ç‰‡å„ªåŒ–
  images: {
    formats: ['image/avif', 'image/webp'],
    minimumCacheTTL: 60,
  },
  
  // å¯¦é©—æ€§åŠŸèƒ½
  experimental: {
    optimizeCss: true,
    optimizePackageImports: ['lucide-react', 'framer-motion'],
  },
  
  // HTTP æ¨™é ­
  async headers() {
    return [
      {
        source: '/:path*',
        headers: [
          {
            key: 'X-DNS-Prefetch-Control',
            value: 'on'
          },
          {
            key: 'X-Frame-Options',
            value: 'SAMEORIGIN'
          },
        ],
      },
    ]
  },
}
```

## é€²éšåŠŸèƒ½å¯¦ä½œ

### 1. å³æ™‚æœå°‹åŠŸèƒ½

å¯¦ä½œä¸€å€‹å¿«é€Ÿã€éŸ¿æ‡‰å¼çš„æœå°‹åŠŸèƒ½å°æ–¼æå‡ä½¿ç”¨è€…é«”é©—è‡³é—œé‡è¦ï¼š

```typescript
// src/components/store/SearchCommand.tsx
'use client'

import { useEffect, useState } from 'react'
import { Command, CommandDialog, CommandEmpty, CommandGroup, CommandInput, CommandItem, CommandList } from '@/components/ui/command'
import { useDebounce } from '@/hooks/useDebounce'
import { Product } from '@/types'
import { Search } from 'lucide-react'

export function SearchCommand({ products }: { products: Product[] }) {
  const [open, setOpen] = useState(false)
  const [search, setSearch] = useState('')
  const debouncedSearch = useDebounce(search, 300)
  
  const filteredProducts = products.filter(product =>
    product.name.toLowerCase().includes(debouncedSearch.toLowerCase()) ||
    product.description.toLowerCase().includes(debouncedSearch.toLowerCase())
  )
  
  useEffect(() => {
    const down = (e: KeyboardEvent) => {
      if (e.key === 'k' && (e.metaKey || e.ctrlKey)) {
        e.preventDefault()
        setOpen((open) => !open)
      }
    }
    
    document.addEventListener('keydown', down)
    return () => document.removeEventListener('keydown', down)
  }, [])
  
  return (
    <CommandDialog open={open} onOpenChange={setOpen}>
      <CommandInput 
        placeholder="æœå°‹ç”¢å“..." 
        value={search}
        onValueChange={setSearch}
      />
      <CommandList>
        <CommandEmpty>æ‰¾ä¸åˆ°ç›¸é—œç”¢å“</CommandEmpty>
        <CommandGroup heading="ç”¢å“">
          {filteredProducts.slice(0, 5).map((product) => (
            <CommandItem
              key={product.id}
              onSelect={() => {
                // å°èˆªåˆ°ç”¢å“é é¢
                window.location.href = \`/products/\${product.slug}\`
                setOpen(false)
              }}
            >
              <Search className="mr-2 h-4 w-4" />
              <span>{product.name}</span>
            </CommandItem>
          ))}
        </CommandGroup>
      </CommandList>
    </CommandDialog>
  )
}
```

### 2. é€²éšç¯©é¸ç³»çµ±

å»ºç«‹å¤šç¶­åº¦çš„ç”¢å“ç¯©é¸åŠŸèƒ½ï¼š

```typescript
// src/components/store/ProductFilters.tsx
export function ProductFilters({ 
  categories, 
  priceRange, 
  onFilterChange 
}: ProductFiltersProps) {
  const [filters, setFilters] = useState({
    category: 'all',
    minPrice: 0,
    maxPrice: 9999,
    inStock: false,
    sortBy: 'featured'
  })
  
  return (
    <aside className="w-64 space-y-6">
      {/* åˆ†é¡ç¯©é¸ */}
      <div>
        <h3 className="font-semibold mb-3">å•†å“åˆ†é¡</h3>
        <RadioGroup
          value={filters.category}
          onValueChange={(value) => {
            setFilters({ ...filters, category: value })
            onFilterChange({ ...filters, category: value })
          }}
        >
          <div className="space-y-2">
            <Label className="flex items-center gap-2">
              <RadioGroupItem value="all" />
              æ‰€æœ‰å•†å“
            </Label>
            {categories.map((category) => (
              <Label key={category} className="flex items-center gap-2">
                <RadioGroupItem value={category} />
                {category}
              </Label>
            ))}
          </div>
        </RadioGroup>
      </div>
      
      {/* åƒ¹æ ¼ç¯„åœ */}
      <div>
        <h3 className="font-semibold mb-3">åƒ¹æ ¼ç¯„åœ</h3>
        <div className="space-y-4">
          <Slider
            min={0}
            max={1000}
            step={10}
            value={[filters.minPrice, filters.maxPrice]}
            onValueChange={([min, max]) => {
              setFilters({ ...filters, minPrice: min, maxPrice: max })
              onFilterChange({ ...filters, minPrice: min, maxPrice: max })
            }}
          />
          <div className="flex justify-between text-sm">
            <span>${filters.minPrice}</span>
            <span>${filters.maxPrice}</span>
          </div>
        </div>
      </div>
      
      {/* å…¶ä»–ç¯©é¸é¸é … */}
      <div>
        <Label className="flex items-center gap-2">
          <Checkbox
            checked={filters.inStock}
            onCheckedChange={(checked) => {
              setFilters({ ...filters, inStock: checked as boolean })
              onFilterChange({ ...filters, inStock: checked as boolean })
            }}
          />
          åƒ…é¡¯ç¤ºæœ‰åº«å­˜å•†å“
        </Label>
      </div>
    </aside>
  )
}
```

## æœ€ä½³å¯¦è¸èˆ‡æŠ€å·§

### 1. ç¨‹å¼ç¢¼çµ„ç¹”

ä¿æŒç¨‹å¼ç¢¼çš„æ¨¡çµ„åŒ–å’Œå¯ç¶­è­·æ€§ï¼š

- **å…ƒä»¶åˆ†é›¢**ï¼šå°‡å¤§å‹å…ƒä»¶æ‹†åˆ†æˆæ›´å°çš„ã€å¯é‡ç”¨çš„éƒ¨åˆ†
- **è‡ªè¨‚ Hooks**ï¼šæŠ½å–å…±ç”¨é‚è¼¯åˆ°è‡ªè¨‚ Hooks ä¸­
- **é¡å‹å®‰å…¨**ï¼šå……åˆ†åˆ©ç”¨ TypeScript çš„é¡å‹ç³»çµ±
- **å‘½åè¦ç¯„**ï¼šä½¿ç”¨ä¸€è‡´çš„å‘½åè¦ç¯„ï¼ˆå¦‚ PascalCase ç”¨æ–¼å…ƒä»¶ï¼ŒcamelCase ç”¨æ–¼å‡½æ•¸ï¼‰

### 2. æ•ˆèƒ½ç›£æ§

ä½¿ç”¨ Next.js å…§å»ºçš„æ•ˆèƒ½åˆ†æå·¥å…·ï¼š

```typescript
// åœ¨ next.config.mjs ä¸­å•Ÿç”¨åˆ†æ
const nextConfig = {
  // ... å…¶ä»–é…ç½®
  
  // å•Ÿç”¨æ•ˆèƒ½åˆ†æ
  analytics: {
    enabled: true,
  },
  
  // Web Vitals å ±å‘Š
  experimental: {
    webVitalsAttribution: ['CLS', 'LCP', 'FCP', 'FID', 'TTFB'],
  },
}
```

### 3. ç„¡éšœç¤™è¨­è¨ˆ

ç¢ºä¿ç¶²ç«™å°æ‰€æœ‰ä½¿ç”¨è€…éƒ½æ˜¯å¯è¨ªå•çš„ï¼š

```typescript
// ä½¿ç”¨èªæ„åŒ– HTML å’Œ ARIA å±¬æ€§
<nav role="navigation" aria-label="ä¸»å°èˆª">
  <ul>
    {navItems.map((item) => (
      <li key={item.id}>
        <Link 
          href={item.href}
          aria-current={pathname === item.href ? 'page' : undefined}
        >
          {item.label}
        </Link>
      </li>
    ))}
  </ul>
</nav>

// ç¢ºä¿äº’å‹•å…ƒç´ æœ‰é©ç•¶çš„ç„¦é»æ¨£å¼
<Button 
  className="focus:ring-2 focus:ring-primary focus:ring-offset-2"
  aria-label="åŠ å…¥è³¼ç‰©è»Š"
>
  <ShoppingCart className="h-4 w-4" aria-hidden="true" />
  åŠ å…¥è³¼ç‰©è»Š
</Button>
```

## éƒ¨ç½²èˆ‡ä¸Šç·š

### Vercel éƒ¨ç½²

Vercel æ˜¯éƒ¨ç½² Next.js æ‡‰ç”¨ç¨‹å¼çš„æœ€ä½³é¸æ“‡ï¼Œæä¾›è‡ªå‹•åŒ–éƒ¨ç½²å’Œå„ªåŒ–ï¼š

1. å°‡ç¨‹å¼ç¢¼æ¨é€åˆ° GitHub
2. åœ¨ Vercel ä¸ŠåŒ¯å…¥å°ˆæ¡ˆ
3. è¨­ç½®ç’°å¢ƒè®Šæ•¸
4. è‡ªå‹•éƒ¨ç½²å®Œæˆ

### æ•ˆèƒ½ç›£æ§å’Œåˆ†æ

éƒ¨ç½²å¾Œï¼Œä½¿ç”¨ä»¥ä¸‹å·¥å…·ç›£æ§ç¶²ç«™æ•ˆèƒ½ï¼š

- **Vercel Analytics**ï¼šå…§å»ºçš„æ•ˆèƒ½åˆ†æ
- **Google Analytics 4**ï¼šä½¿ç”¨è€…è¡Œç‚ºåˆ†æ
- **Sentry**ï¼šéŒ¯èª¤è¿½è¹¤å’Œæ•ˆèƒ½ç›£æ§

## çµè«–

ä½¿ç”¨ Next.jsã€Reactã€MDXã€Tailwind CSSã€Shadcn/UI å’Œ TypeScript å»ºç«‹ä¸€é å¼é›»å•†ç¶²ç«™ï¼Œä¸åƒ…èƒ½å¤ æä¾›å„ªç§€çš„ä½¿ç”¨è€…é«”é©—ï¼Œé‚„èƒ½ç¢ºä¿é–‹ç™¼æ•ˆç‡å’Œç¨‹å¼ç¢¼å“è³ªã€‚é€éæœ¬æ–‡è©³ç´°çš„æ­¥é©ŸæŒ‡å—å’Œæœ€ä½³å¯¦è¸ï¼Œä½ ç¾åœ¨æ“æœ‰äº†å»ºç«‹ç¾ä»£åŒ–é›»å•†ç¶²ç«™æ‰€éœ€çš„æ‰€æœ‰çŸ¥è­˜å’Œå·¥å…·ã€‚

é€™å¥—æŠ€è¡“å †æ£§çš„å„ªå‹¢åœ¨æ–¼ï¼š

1. **é–‹ç™¼æ•ˆç‡**ï¼šå®Œå–„çš„é–‹ç™¼å·¥å…·å’Œå…ƒä»¶åº«å¤§å¹…æå‡é–‹ç™¼é€Ÿåº¦
2. **æ•ˆèƒ½å„ªç•°**ï¼šNext.js çš„å„ªåŒ–åŠŸèƒ½ç¢ºä¿ç¶²ç«™è¼‰å…¥å¿«é€Ÿ
3. **SEO å‹å¥½**ï¼šä¼ºæœå™¨ç«¯æ¸²æŸ“å’Œçµæ§‹åŒ–è³‡æ–™æå‡æœå°‹å¼•æ“æ’å
4. **æ˜“æ–¼ç¶­è­·**ï¼šTypeScript å’Œæ¨¡çµ„åŒ–è¨­è¨ˆè®“ç¨‹å¼ç¢¼æ›´å®¹æ˜“ç¶­è­·
5. **æ“´å±•æ€§å¼·**ï¼šå¯ä»¥è¼•é¬†æ·»åŠ æ–°åŠŸèƒ½å’Œæ•´åˆç¬¬ä¸‰æ–¹æœå‹™

éš¨è‘—é›»å•†å¸‚å ´çš„æŒçºŒæˆé•·ï¼ŒæŒæ¡é€™äº›ç¾ä»£åŒ–çš„é–‹ç™¼æŠ€è¡“å°‡è®“ä½ åœ¨ç«¶çˆ­ä¸­ä¿æŒé ˜å…ˆã€‚ç„¡è«–æ˜¯å»ºç«‹æ–°çš„é›»å•†å“ç‰Œï¼Œé‚„æ˜¯ç‚ºç¾æœ‰æ¥­å‹™é–‹ç™¼ç·šä¸ŠéŠ·å”®ç®¡é“ï¼Œé€™å¥—æŠ€è¡“å †æ£§éƒ½èƒ½æ»¿è¶³ä½ çš„éœ€æ±‚ã€‚

è¨˜ä½ï¼ŒæˆåŠŸçš„é›»å•†ç¶²ç«™ä¸åƒ…éœ€è¦å„ªç§€çš„æŠ€è¡“å¯¦ä½œï¼Œé‚„éœ€è¦æŒçºŒçš„å„ªåŒ–å’Œæ”¹é€²ã€‚å®šæœŸæ”¶é›†ä½¿ç”¨è€…å›é¥‹ï¼Œåˆ†æç¶²ç«™æ•¸æ“šï¼Œä¸¦æ ¹æ“šå¸‚å ´è®ŠåŒ–èª¿æ•´ç­–ç•¥ï¼Œæ‰èƒ½ç¢ºä¿ä½ çš„ä¸€é å¼å•†åº—åœ¨æ¿€çƒˆçš„å¸‚å ´ç«¶çˆ­ä¸­è„«ç©è€Œå‡ºã€‚
